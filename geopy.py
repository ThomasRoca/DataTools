def geopy(iso, output, *option):
    
    try:
        institution=option[0]
    except:
        institution="NA"
        
    print("Using:",iso, "| looking for:", output, "| Institution:",institution)
    
    iso3_country = {"STP":"Sao Tome and Principe","ASM":"American Samoa","AUS":"Australia","BRN":"Brunei Darussalam","CHN":"China","FJI":"Fiji","FSM":"Micronesia, Fed. Sts.","GUM":"Guam","HKG":"Hong Kong SAR, China","IDN":"Indonesia","JPN":"Japan","KHM":"Cambodia","KIR":"Kiribati","KOR":"Korea, Rep.","LAO":"Lao PDR","MAC":"Macao SAR, China","MHL":"Marshall Islands","MMR":"Myanmar","MNG":"Mongolia","MNP":"Northern Mariana Islands","MYS":"Malaysia","NCL":"New Caledonia","NZL":"New Zealand","PHL":"Philippines","PLW":"Palau","PNG":"Papua New Guinea","PRK":"Korea, Dem. Rep.","PYF":"French Polynesia","SGP":"Singapore","SLB":"Solomon Islands","THA":"Thailand","TLS":"Timor-Leste","TON":"Tonga","TUV":"Tuvalu","TWN":"Taiwan, China","VNM":"Vietnam","VUT":"Vanuatu","WSM":"Samoa","ALB":"Albania","AND":"Andorra","ARM":"Armenia","AUT":"Austria","AZE":"Azerbaijan","BEL":"Belgium","BGR":"Bulgaria","BIH":"Bosnia and Herzegovina","BLR":"Belarus","CHE":"Switzerland","CHI":"Channel Islands","CYP":"Cyprus","CZE":"Czech Republic","DEU":"Germany","DNK":"Denmark","ESP":"Spain","EST":"Estonia","FIN":"Finland","FRA":"France","FRO":"Faeroe Islands","GBR":"United Kingdom","GEO":"Georgia","GRC":"Greece","GRL":"Greenland","HRV":"Croatia","HUN":"Hungary","IMN":"Isle of Man","IRL":"Ireland","ISL":"Iceland","ITA":"Italy","KAZ":"Kazakhstan","KGZ":"Kyrgyz Republic","LIE":"Liechtenstein","LTU":"Lithuania","LUX":"Luxembourg","LVA":"Latvia","MCO":"Monaco","MDA":"Moldova","MKD":"Macedonia, FYR","MNE":"Montenegro","NLD":"Netherlands","NOR":"Norway","POL":"Poland","PRT":"Portugal","ROU":"Romania","RUS":"Russian Federation","SMR":"San Marino","SRB":"Serbia","SVK":"Slovak Republic","SVN":"Slovenia","SWE":"Sweden","TJK":"Tajikistan","TKM":"Turkmenistan","TUR":"Turkey","UKR":"Ukraine","UZB":"Uzbekistan","ABW":"Aruba","ARG":"Argentina","ATG":"Antigua and Barbuda","BHS":"Bahamas, The","BLZ":"Belize","BOL":"Bolivia","BRA":"Brazil","BRB":"Barbados","CHL":"Chile","COL":"Colombia","CRI":"Costa Rica","CUB":"Cuba","CUW":"Curacao","CYM":"Cayman Islands","DMA":"Dominica","DOM":"Dominican Republic","ECU":"Ecuador","GRD":"Grenada","GTM":"Guatemala","GUY":"Guyana","HND":"Honduras","HTI":"Haiti","JAM":"Jamaica","KNA":"St. Kitts and Nevis","LCA":"St. Lucia","MAF":"St. Martin (French part)","MEX":"Mexico","NIC":"Nicaragua","PAN":"Panama","PER":"Peru","PRI":"Puerto Rico","PRY":"Paraguay","SLV":"El Salvador","SUR":"Suriname","SXM":"Sint Maarten (Dutch part)","TCA":"Turks and Caicos Islands","TTO":"Trinidad and Tobago","URY":"Uruguay","VCT":"St. Vincent and the Grenadines","VEN":"Venezuela, RB","VIR":"Virgin Islands (U.S.)","ARE":"United Arab Emirates","BHR":"Bahrain","DJI":"Djibouti","DZA":"Algeria","EGY":"Egypt, Arab Rep.","IRN":"Iran, Islamic Rep.","IRQ":"Iraq","ISR":"Israel","JOR":"Jordan","KWT":"Kuwait","LBN":"Lebanon","LBY":"Libya","MAR":"Morocco","MLT":"Malta","OMN":"Oman","PSE":"West Bank and Gaza","QAT":"Qatar","SAU":"Saudi Arabia","SYR":"Syrian Arab Republic","TUN":"Tunisia","YEM":"Yemen, Rep.","BMU":"Bermuda","CAN":"Canada","USA":"United States","AFG":"Afghanistan","BGD":"Bangladesh","BTN":"Bhutan","IND":"India","LKA":"Sri Lanka","MDV":"Maldives","NPL":"Nepal","PAK":"Pakistan","AGO":"Angola","BDI":"Burundi","BEN":"Benin","BFA":"Burkina Faso","BWA":"Botswana","CAF":"Central African Republic","CIV":"Cote d'Ivoire","CMR":"Cameroon","COD":"Congo, Dem. Rep.","COG":"Congo, Rep.","COM":"Comoros","CPV":"Cabo Verde","ERI":"Eritrea","ETH":"Ethiopia","GAB":"Gabon","GHA":"Ghana","GIN":"Guinea","GMB":"Gambia, The","GNB":"Guinea-Bissau","GNQ":"Equatorial Guinea","KEN":"Kenya","LBR":"Liberia","LSO":"Lesotho","MDG":"Madagascar","MLI":"Mali","MOZ":"Mozambique","MRT":"Mauritania","MUS":"Mauritius","MWI":"Malawi","NAM":"Namibia","NER":"Niger","NGA":"Nigeria","RWA":"Rwanda","SDN":"Sudan","SEN":"Senegal","SLE":"Sierra Leone","SOM":"Somalia","SSD":"South Sudan","SWZ":"Swaziland","SYC":"Seychelles","TCD":"Chad","TGO":"Togo","TZA":"Tanzania","UGA":"Uganda","ZAF":"South Africa","ZMB":"Zambia","ZWE":"Zimbabwe"} 
    country_iso3={v: k for k, v in iso3_country.items()}

    iso2_iso3 ={"LI":"LIE","AF":"AFG","AL":"ALB","DZ":"DZA","AO":"AGO","AG":"ATG","AR":"ARG","AM":"ARM","AU":"AUS","AT":"AUT","AZ":"AZE","BS":"BHS","BH":"BHR","BD":"BGD","BB":"BRB","BY":"BLR","BE":"BEL","BZ":"BLZ","BJ":"BEN","BT":"BTN","BO":"BOL","BA":"BIH","BW":"BWA","BR":"BRA","BN":"BRN","BG":"BGR","BF":"BFA","BI":"BDI","CV":"CPV","KH":"KHM","CM":"CMR","CA":"CAN","CF":"CAF","TD":"TCD","CL":"CHL","CN":"CHN","CO":"COL","KM":"COM","CD":"COD","CG":"COG","CR":"CRI","CI":"CIV","HR":"HRV","CY":"CYP","CZ":"CZE","DK":"DNK","DJ":"DJI","DM":"DMA","DO":"DOM","EC":"ECU","EG":"EGY","SV":"SLV","GQ":"GNQ","ER":"ERI","EE":"EST","ET":"ETH","FJ":"FJI","FI":"FIN","FR":"FRA","GA":"GAB","GM":"GMB","GE":"GEO","DE":"DEU","GH":"GHA","GR":"GRC","GD":"GRD","GT":"GTM","GN":"GIN","GW":"GNB","GY":"GUY","HT":"HTI","HN":"HND","HK":"HKG","HU":"HUN","IS":"ISL","IN":"IND","ID":"IDN","IR":"IRN","IQ":"IRQ","IE":"IRL","IL":"ISR","IT":"ITA","JM":"JAM","JP":"JPN","JO":"JOR","KZ":"KAZ","KE":"KEN","KI":"KIR","KR":"KOR","XK":"UNK","KW":"KWT","KG":"KGZ","LA":"LAO","LV":"LVA","LB":"LBN","LS":"LSO","LR":"LBR","LY":"LBY","LT":"LTU","LU":"LUX","MO":"MAC","MK":"MKD","MG":"MDG","MW":"MWI","MY":"MYS","MV":"MDV","ML":"MLI","MT":"MLT","MH":"MHL","MR":"MRT","MU":"MUS","MX":"MEX","FM":"FSM","MD":"MDA","MN":"MNG","ME":"MNE","MA":"MAR","MZ":"MOZ","MM":"MMR","NA":"NAM","NP":"NPL","NL":"NLD","NZ":"NZL","NI":"NIC","NE":"NER","NG":"NGA","NO":"NOR","OM":"OMN","PK":"PAK","PW":"PLW","PA":"PAN","PG":"PNG","PY":"PRY","PE":"PER","PH":"PHL","PL":"POL","PT":"PRT","PR":"PRI","QA":"QAT","RO":"ROU","RU":"RUS","RW":"RWA","WS":"WSM","SM":"SMR","ST":"STP","SA":"SAU","SN":"SEN","RS":"SRB","SC":"SYC","SL":"SLE","SG":"SGP","SK":"SVK","SI":"SVN","SB":"SLB","ZA":"ZAF","SS":"SSD","ES":"ESP","LK":"LKA","KN":"KNA","LC":"LCA","VC":"VCT","SD":"SDN","SR":"SUR","SZ":"SWZ","SE":"SWE","CH":"CHE","SY":"SYR","TW":"TWN","TJ":"TJK","TZ":"TZA","TH":"THA","TL":"TLS","TG":"TGO","TO":"TON","TT":"TTO","TN":"TUN","TR":"TUR","TM":"TKM","TV":"TUV","UG":"UGA","UA":"UKR","AE":"ARE","GB":"GBR","US":"USA","UY":"URY","UZ":"UZB","VU":"VUT","VE":"VEN","VN":"VNM","YE":"YEM","ZM":"ZMB","ZW":"ZWE"}
    iso3_iso2= {v: k for k, v in iso2_iso3.items()}

    iso2_iso3_EU ={"UK":"GBR", "EL":"GRC","LI":"LIE","AF":"AFG","AL":"ALB","DZ":"DZA","AO":"AGO","AG":"ATG","AR":"ARG","AM":"ARM","AU":"AUS","AT":"AUT","AZ":"AZE","BS":"BHS","BH":"BHR","BD":"BGD","BB":"BRB","BY":"BLR","BE":"BEL","BZ":"BLZ","BJ":"BEN","BT":"BTN","BO":"BOL","BA":"BIH","BW":"BWA","BR":"BRA","BN":"BRN","BG":"BGR","BF":"BFA","BI":"BDI","CV":"CPV","KH":"KHM","CM":"CMR","CA":"CAN","CF":"CAF","TD":"TCD","CL":"CHL","CN":"CHN","CO":"COL","KM":"COM","CD":"COD","CG":"COG","CR":"CRI","CI":"CIV","HR":"HRV","CY":"CYP","CZ":"CZE","DK":"DNK","DJ":"DJI","DM":"DMA","DO":"DOM","EC":"ECU","EG":"EGY","SV":"SLV","GQ":"GNQ","ER":"ERI","EE":"EST","ET":"ETH","FJ":"FJI","FI":"FIN","FR":"FRA","GA":"GAB","GM":"GMB","GE":"GEO","DE":"DEU","GH":"GHA","GD":"GRD","GT":"GTM","GN":"GIN","GW":"GNB","GY":"GUY","HT":"HTI","HN":"HND","HK":"HKG","HU":"HUN","IS":"ISL","IN":"IND","ID":"IDN","IR":"IRN","IQ":"IRQ","IE":"IRL","IL":"ISR","IT":"ITA","JM":"JAM","JP":"JPN","JO":"JOR","KZ":"KAZ","KE":"KEN","KI":"KIR","KR":"KOR","XK":"UNK","KW":"KWT","KG":"KGZ","LA":"LAO","LV":"LVA","LB":"LBN","LS":"LSO","LR":"LBR","LY":"LBY","LT":"LTU","LU":"LUX","MO":"MAC","MK":"MKD","MG":"MDG","MW":"MWI","MY":"MYS","MV":"MDV","ML":"MLI","MT":"MLT","MH":"MHL","MR":"MRT","MU":"MUS","MX":"MEX","FM":"FSM","MD":"MDA","MN":"MNG","ME":"MNE","MA":"MAR","MZ":"MOZ","MM":"MMR","NA":"NAM","NP":"NPL","NL":"NLD","NZ":"NZL","NI":"NIC","NE":"NER","NG":"NGA","NO":"NOR","OM":"OMN","PK":"PAK","PW":"PLW","PA":"PAN","PG":"PNG","PY":"PRY","PE":"PER","PH":"PHL","PL":"POL","PT":"PRT","PR":"PRI","QA":"QAT","RO":"ROU","RU":"RUS","RW":"RWA","WS":"WSM","SM":"SMR","ST":"STP","SA":"SAU","SN":"SEN","RS":"SRB","SC":"SYC","SL":"SLE","SG":"SGP","SK":"SVK","SI":"SVN","SB":"SLB","ZA":"ZAF","SS":"SSD","ES":"ESP","LK":"LKA","KN":"KNA","LC":"LCA","VC":"VCT","SD":"SDN","SR":"SUR","SZ":"SWZ","SE":"SWE","CH":"CHE","SY":"SYR","TW":"TWN","TJ":"TJK","TZ":"TZA","TH":"THA","TL":"TLS","TG":"TGO","TO":"TON","TT":"TTO","TN":"TUN","TR":"TUR","TM":"TKM","TV":"TUV","UG":"UGA","UA":"UKR","AE":"ARE","US":"USA","UY":"URY","UZ":"UZB","VU":"VUT","VE":"VEN","VN":"VNM","YE":"YEM","ZM":"ZMB","ZW":"ZWE"}
    iso3_iso2_EU = {v: k for k, v in iso2_iso3_EU.items()}

    if len(iso)==3 and output=="cname": return  iso3_country[iso]
    
    if len(iso)==3 and output=="iso2" and institution=="NA": return  iso3_iso2[iso]
    if len(iso)==2 and output=="cname" and institution=="NA": return  iso3_country[iso2_iso3[iso]]
    if len(iso)==2 and output=="iso3" and institution=="NA": return  iso2_iso3[iso]
    
    if len(iso)==3 and output=="iso2" and institution=="EU": return iso3_iso2_EU[iso]
    if len(iso)==2 and output=="cname" and institution=="EU": return  iso3_country[iso2_iso3_EU[iso]]
    if len(iso)==2 and output=="iso3" and institution=="EU": return  iso2_iso3_EU[iso]
    
    if len(iso)>3 and output=="iso2" and institution=="NA": return   iso3_iso2[country_iso3[iso]]
    if len(iso)>3 and output=="iso2" and institution=="EU": return   iso3_iso2_EU[country_iso3[iso]]

    if len(iso)>3 and output=="iso3" and institution=="NA": return   country_iso3[iso]
    if len(iso)>3 and output=="iso3" and institution=="EU": return   country_iso3[iso]
        
    return
